<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Video Test for Kaszandra</title>

    <!-- Your new icon links - this is perfect! -->
    <link rel="icon" href="lily.png">
    <link rel="apple-touch-icon" href="lily.png">
    
    <!-- Makes it feel like a full-screen app on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body, html {
            font-family: 'Inter', sans-serif;
            /* Prevent scrolling and bouncing */
            overflow: hidden;
            height: 100%;
        }

        /* A simple pulsating animation for the heart */
        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.1);
            }
        }

        .heart-pulse {
            animation: pulse 2s infinite ease-in-out;
        }

        /* Custom transition for the message, picture, or video */
        /* These classes will be applied to <p>, <img>, or <video> tags */
        #message-container > * {
            transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
        }

        .message-hidden {
            opacity: 0;
            transform: translateY(20px);
        }

        .message-visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Ensure no weird text selection on tap */
        .no-select {
            -webkit-user-select: none; /* Safari */
            -ms-user-select: none; /* IE 10+ */
            user-select: none; /* Standard */
        }
    </style>
</head>
<body class="h-full bg-gradient-to-t from-pink-300 to-rose-200 flex flex-col items-center justify-center p-4 no-select">

    <!-- Main container for the app content -->
    <div class="flex flex-col items-center justify-center text-center w-full h-full">

        <!-- The tappable heart -->
        <!-- We use 'touchstart' and 'mousedown' for instant response on mobile and desktop -->
        <div id="heart" class="cursor-pointer heart-pulse">
            <svg class="w-48 h-48 drop-shadow-lg" viewBox="0 0 24 24" fill="url(#heartGradient)">
                <defs>
                    <linearGradient id="heartGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                        <stop offset="0%" style="stop-color:#FF8FAB; stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#FB6391; stop-opacity:1" />
                    </linearGradient>
                </defs>
                <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
            </svg>
        </div>

        <!-- 
          The message/picture area. 
          This will now hold <p>, <img>, or <video> elements.
        -->
        <div id="message-container" class="min-h-[8rem] mt-10 flex justify-center items-center">
            <p id="message" class="text-2xl md:text-3xl font-bold text-white text-shadow-md message-hidden max-w-md">
                Tap the heart to test video!
            </p>
        </div>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            // --- THIS IS THE PART TO EDIT ---
            // This test version ONLY has the video to see if it works.
            const allReasons = [
                // --- Your Video ---
                { type: 'video', content: 'vid1.mp4' }
            ];
            // --------------------------------------------------


            const heart = document.getElementById('heart');
            const messageContainer = document.getElementById('message-container');
            // Keep track of the *content* to avoid repeats
            let currentReasonContent = "Tap the heart!";

            function showNewReason() {
                // Hide the current message/image
                const currentElement = messageContainer.firstElementChild;
                if (currentElement) {
                    currentElement.classList.remove('message-visible');
                    currentElement.classList.add('message-hidden');
                }

                // Wait for the fade-out animation to finish
                setTimeout(() => {
                    let newReason;
                    // Make sure we don't show the same reason twice in a row
                    do {
                        const randomIndex = Math.floor(Math.random() * allReasons.length);
                        newReason = allReasons[randomIndex];
                    } while (allReasons.length > 1 && newReason.content === currentReasonContent);

                    currentReasonContent = newReason.content;
                    let newHtml = '';

                    // Check if the new reason is text, an image, or a video
                    if (newReason.type === 'text') {
                        newHtml = `<p id="message" class="text-2xl md:text-3xl font-bold text-white text-shadow-md message-hidden max-w-md">${newReason.content}</p>`;
                    } else if (newReason.type === 'image') {
                        newHtml = `<img src="${newReason.content}" alt="For Kaszandra ❤️" class="message-hidden max-h-80 rounded-lg shadow-lg object-cover">`;
                    } else if (newReason.type === 'video') {
                        // Added video support!
                        // Added autoplay back in. It will try to autoplay with sound (since it's after a click).
                        // If the browser blocks it, 'controls' will still be visible for manual play.
                        newHtml = `<video src="${newReason.content}" class="message-hidden max-h-80 rounded-lg shadow-lg" playsinline autoplay controls loop></video>`;
                    }

                    // Set the new HTML inside the container
                    messageContainer.innerHTML = newHtml;

                    // Fade the new element in
                    const newElement = messageContainer.firstElementChild;
                    if (newElement) {
                        // This is a little trick to force the browser to apply the transition
                        void newElement.offsetWidth; 
                        
                        newElement.classList.remove('message-hidden');
                        newElement.classList.add('message-visible');
                    }

                }, 500); // This matches the transition duration
            }

            // Show the initial "Tap the heart!" message on load
            const initialMessage = document.getElementById('message');
            if (initialMessage) {
                setTimeout(() => {
                    initialMessage.classList.remove('message-hidden');
                    initialMessage.classList.add('message-visible');
                }, 100);
            }

            // Event listeners for the heart
            heart.addEventListener('click', showNewReason);
            heart.addEventListener('touchstart', (e) => {
                // Prevent the 'click' event from firing right after
                e.preventDefault();
                showNewReason();
            });

        }); // We close the DOMContentLoaded listener here
    </script>
</body>
</html>
